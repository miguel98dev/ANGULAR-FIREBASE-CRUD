{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./login/login.service\";\nexport class DataServices {\n  // injectamos el HttpClientModule desde el constructor\n  constructor(httpClient, loginService) {\n    this.httpClient = httpClient;\n    this.loginService = loginService;\n  }\n  cargarEmpleados() {\n    const token = this.loginService.getIdToken();\n    return this.httpClient.get('https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos.json');\n  }\n  // recibe como parámetro el array tipo Empleado creado en empleados.services\n  guardarEmpleados(empleados) {\n    // utilizamos el objeto injectado. si reemplazamos el post por put, sobreescribe los datos que ya están registrados anteriormente, evitando duplicados\n    this.httpClient.put('https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos.json', empleados).subscribe({\n      next: response => {\n        console.log('Se han guardado los empleados: ' + response);\n      },\n      error: error => {\n        console.log('Error: ' + error);\n      }\n    });\n  }\n  // recibe como parámetros el índice del empleado y el objeto de tipo Empleado\n  actualizarEmpleado(indice, empleado) {\n    let url = 'https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos/' + indice + '.json';\n    this.httpClient.put(url, empleado).subscribe({\n      next: response => {\n        console.log('Se ha modificado correctamente el empleado: ' + response);\n      },\n      error: error => {\n        console.log('Error: ' + error);\n      }\n    });\n  }\n  eliminarEmpleado(indice) {\n    let url = 'https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos/' + indice + '.json';\n    this.httpClient.delete(url).subscribe({\n      next: response => {\n        console.log('Se ha eliminado correctamente el empleado: ' + response);\n      },\n      error: error => {\n        console.log('Error: ' + error);\n      }\n    });\n  }\n}\nDataServices.ɵfac = function DataServices_Factory(t) {\n  return new (t || DataServices)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.LoginService));\n};\nDataServices.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DataServices,\n  factory: DataServices.ɵfac\n});","map":{"version":3,"mappings":";;;AAMA,OAAM,MAAOA,YAAY;EAErB;EAEAC,YAAoBC,UAAqB,EAAUC,YAAyB;IAAxD,eAAU,GAAVD,UAAU;IAAqB,iBAAY,GAAZC,YAAY;EAAgB;EAG/EC,eAAe;IACX,MAAMC,KAAK,GAAG,IAAI,CAACF,YAAY,CAACG,UAAU,EAAE;IAC7C,OAAO,IAAI,CAACJ,UAAU,CAACK,GAAG,CAAC,sFAAsF,CAAC;EACrH;EAEA;EACAC,gBAAgB,CAACC,SAAoB;IACjC;IACA,IAAI,CAACP,UAAU,CAACQ,GAAG,CAAC,sFAAsF,EAAED,SAAS,CAAC,CAACE,SAAS,CAAC;MAC7HC,IAAI,EAAEC,QAAQ,IAAE;QAACC,OAAO,CAACC,GAAG,CAAC,iCAAiC,GAAGF,QAAQ,CAAC;MAAC,CAAC;MAC5EG,KAAK,EAAEA,KAAK,IAAE;QAACF,OAAO,CAACC,GAAG,CAAC,SAAS,GAAGC,KAAK,CAAC;MAAA;KAChD,CAAC;EACN;EAEA;EACAC,kBAAkB,CAACC,MAAa,EAAEC,QAAiB;IAC/C,IAAIC,GAAG,GAAG,kFAAkF,GAAGF,MAAM,GAAG,OAAO;IAE/G,IAAI,CAAChB,UAAU,CAACQ,GAAG,CAACU,GAAG,EAAED,QAAQ,CAAC,CAACR,SAAS,CAAC;MACzCC,IAAI,EAAEC,QAAQ,IAAE;QAACC,OAAO,CAACC,GAAG,CAAC,8CAA8C,GAAGF,QAAQ,CAAC;MAAC,CAAC;MACzFG,KAAK,EAAEA,KAAK,IAAE;QAACF,OAAO,CAACC,GAAG,CAAC,SAAS,GAAGC,KAAK,CAAC;MAAA;KAChD,CAAC;EACN;EAEAK,gBAAgB,CAACH,MAAa;IAC1B,IAAIE,GAAG,GAAG,kFAAkF,GAAGF,MAAM,GAAG,OAAO;IAE/G,IAAI,CAAChB,UAAU,CAACoB,MAAM,CAACF,GAAG,CAAC,CAACT,SAAS,CAAC;MAClCC,IAAI,EAAEC,QAAQ,IAAE;QAACC,OAAO,CAACC,GAAG,CAAC,6CAA6C,GAAGF,QAAQ,CAAC;MAAC,CAAC;MACxFG,KAAK,EAAEA,KAAK,IAAE;QAACF,OAAO,CAACC,GAAG,CAAC,SAAS,GAAGC,KAAK,CAAC;MAAA;KAChD,CAAC;EACN;;AAtCShB,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;SAAZA,YAAY;EAAAuB,SAAZvB,YAAY;AAAA","names":["DataServices","constructor","httpClient","loginService","cargarEmpleados","token","getIdToken","get","guardarEmpleados","empleados","put","subscribe","next","response","console","log","error","actualizarEmpleado","indice","empleado","url","eliminarEmpleado","delete","factory"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\masterD\\ANGULAR\\app-empleados\\src\\app\\data.services.ts"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Empleado } from \"./empleado.model\";\r\nimport { LoginService } from \"./login/login.service\";\r\n\r\n@Injectable()\r\nexport class DataServices{\r\n\r\n    // injectamos el HttpClientModule desde el constructor\r\n\r\n    constructor(private httpClient:HttpClient, private loginService:LoginService) {}\r\n\r\n\r\n    cargarEmpleados() {\r\n        const token = this.loginService.getIdToken();\r\n       return this.httpClient.get('https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos.json');\r\n    }\r\n\r\n    // recibe como parámetro el array tipo Empleado creado en empleados.services\r\n    guardarEmpleados(empleados:Empleado[]) {\r\n        // utilizamos el objeto injectado. si reemplazamos el post por put, sobreescribe los datos que ya están registrados anteriormente, evitando duplicados\r\n        this.httpClient.put('https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos.json', empleados).subscribe({ // url base de datos (añadimos datos.json) y especifamos el array\r\n            next: response=>{console.log('Se han guardado los empleados: ' + response);},\r\n            error: error=>{console.log('Error: ' + error)}\r\n        });\r\n    }\r\n    \r\n    // recibe como parámetros el índice del empleado y el objeto de tipo Empleado\r\n    actualizarEmpleado(indice:number, empleado:Empleado) {\r\n        let url = 'https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos/' + indice + '.json';\r\n\r\n        this.httpClient.put(url, empleado).subscribe({ // url base de datos (añadimos datos.json) y especifamos el array\r\n            next: response=>{console.log('Se ha modificado correctamente el empleado: ' + response);},\r\n            error: error=>{console.log('Error: ' + error)}\r\n        });\r\n    }\r\n\r\n    eliminarEmpleado(indice:number) {\r\n        let url = 'https://mis-clientes-6a9cd-default-rtdb.europe-west1.firebasedatabase.app/datos/' + indice + '.json';\r\n\r\n        this.httpClient.delete(url).subscribe({ // url base de datos (añadimos datos.json) y especifamos el array\r\n            next: response=>{console.log('Se ha eliminado correctamente el empleado: ' + response);},\r\n            error: error=>{console.log('Error: ' + error)}\r\n        });\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}